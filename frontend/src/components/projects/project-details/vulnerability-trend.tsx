'use client';

import {
  LineChart,
  Line,
  XAxis,
  YAxis,
  CartesianGrid,
  Tooltip,
  ResponsiveContainer,
  Area,
  AreaChart,
} from 'recharts';

interface VulnerabilityTrendProps {
  data: any[];
}

export function VulnerabilityTrend({ data }: VulnerabilityTrendProps) {
  return (
    <div className="glass-panel p-6 rounded-[24px] h-full flex flex-col relative overflow-hidden">
      <div className="flex justify-between items-center mb-6">
        <h3 className="text-xl font-bold text-white flex items-center">
          <span className="material-symbols-outlined mr-3 text-slate-400">ssid_chart</span>
          Vulnerability Trend
        </h3>
        <select className="bg-black/20 border border-white/10 text-slate-300 text-xs rounded-lg px-3 py-1 outline-none focus:border-white/30 font-mono">
          <option>Last 30 Days</option>
          <option>Last 7 Days</option>
          <option>Last 24 Hours</option>
        </select>
      </div>

      <div className="flex-grow w-full h-[300px] border border-white/5 rounded-xl bg-black/20 p-4 relative">
        {/* Horizontal Grid Pattern matching reference */}
        <div className="absolute inset-0 p-8 flex flex-col justify-between pointer-events-none z-0">
          <div className="w-full h-px bg-white/5"></div>
          <div className="w-full h-px bg-white/5"></div>
          <div className="w-full h-px bg-white/5"></div>
          <div className="w-full h-px bg-white/5"></div>
          <div className="w-full h-px bg-white/5"></div>
        </div>

        <div className="absolute inset-0 z-10 p-2">
          <ResponsiveContainer width="100%" height="100%">
            <AreaChart data={data}>
              <defs>
                <linearGradient id="chartFill" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stopColor="white" stopOpacity={0.1} />
                  <stop offset="100%" stopColor="white" stopOpacity={0} />
                </linearGradient>
              </defs>
              <Area
                type="monotone"
                dataKey="score"
                stroke="#fff"
                strokeWidth={2}
                fillOpacity={1}
                fill="url(#chartFill)"
                style={{ filter: 'drop-shadow(0 0 4px rgba(255,255,255,0.5))' }}
              />
            </AreaChart>
          </ResponsiveContainer>
        </div>

        {/* Legend matching reference */}
        <div className="absolute bottom-2 left-8 right-8 flex justify-between text-xs text-slate-500 font-mono z-20">
          <span>Day 1</span>
          <span>Day 5</span>
          <span>Day 10</span>
          <span>Day 15</span>
          <span>Day 20</span>
          <span>Day 25</span>
          <span>Today</span>
        </div>
      </div>
    </div>
  );
}
